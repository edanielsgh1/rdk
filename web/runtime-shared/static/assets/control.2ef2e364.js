function xe(e){if(D(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=V(s)?Ft(s):xe(s);if(o)for(const r in o)t[r]=o[r]}return t}else{if(V(e))return e;if(G(e))return e}}const It=/;(?![^(]*\))/g,jt=/:(.+)/;function Ft(e){const t={};return e.split(It).forEach(n=>{if(n){const s=n.split(jt);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Te(e){let t="";if(V(e))t=e;else if(D(e))for(let n=0;n<e.length;n++){const s=Te(e[n]);s&&(t+=s+" ")}else if(G(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const w=e=>V(e)?e:e==null?"":D(e)||G(e)&&(e.toString===lt||!q(e.toString))?JSON.stringify(e,st,2):String(e),st=(e,t)=>t&&t.__v_isRef?st(e,t.value):at(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:ct(t)?{[`Set(${t.size})`]:[...t.values()]}:G(t)&&!D(t)&&!dt(t)?String(t):t,rt={},Vt=[],it=()=>{},Gt=/^on[^a-z]/,Ht=e=>Gt.test(e),Y=Object.assign,zt=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},D=Array.isArray,at=e=>qe(e)==="[object Map]",ct=e=>qe(e)==="[object Set]",q=e=>typeof e=="function",V=e=>typeof e=="string",G=e=>e!==null&&typeof e=="object",Jt=e=>G(e)&&q(e.then)&&q(e.catch),lt=Object.prototype.toString,qe=e=>lt.call(e),dt=e=>qe(e)==="[object Object]",ut=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ut=/-(\w)/g,fe=ut(e=>e.replace(Ut,(t,n)=>n?n.toUpperCase():"")),mt=ut(e=>e.charAt(0).toUpperCase()+e.slice(1)),Be=(e,t)=>!Object.is(e,t),Wt=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Yt=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Le=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Kt;function Xt(e,t=Kt){t&&t.active&&t.effects.push(e)}const Zt=e=>(e.w&K)>0,Qt=e=>(e.n&K)>0,$t=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=K},en=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];Zt(o)&&!Qt(o)?o.delete(e):t[n++]=o,o.w&=~K,o.n&=~K}t.length=n}};let ue=0,K=1;const Oe=30;let ne;class tn{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Xt(this,s)}run(){if(!this.active)return this.fn();let t=ne,n=we;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ne,ne=this,we=!0,K=1<<++ue,ue<=Oe?$t(this):Ie(this),this.fn()}finally{ue<=Oe&&en(this),K=1<<--ue,ne=this.parent,we=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ne===this?this.deferStop=!0:this.active&&(Ie(this),this.onStop&&this.onStop(),this.active=!1)}}function Ie(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let we=!0;function ee(e){return pt(e)?ee(e.__v_raw):!!(e&&e.__v_isReactive)}function pt(e){return!!(e&&e.__v_isReadonly)}function je(e){return!!(e&&e.__v_isShallow)}function gt(e){return ee(e)||pt(e)}function nn(e){return Yt(e,"__v_skip",!0),e}function X(e){return!!(e&&e.__v_isRef===!0)}function on(e){return X(e)?e.value:e}const sn={get:(e,t,n)=>on(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return X(o)&&!X(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function rn(e){return ee(e)?e:new Proxy(e,sn)}function te(e,t,n,s){let o;try{o=s?e(...s):e()}catch(r){ft(r,t,n)}return o}function Se(e,t,n,s){if(q(e)){const r=te(e,t,n,s);return r&&Jt(r)&&r.catch(l=>{ft(l,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(Se(e[r],t,n,s));return o}function ft(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const l=t.proxy,c=n;for(;r;){const h=r.ec;if(h){for(let S=0;S<h.length;S++)if(h[S](e,l,c)===!1)return}r=r.parent}const u=t.appContext.config.errorHandler;if(u){te(u,null,10,[e,l,c]);return}}an(e,n,o,s)}function an(e,t,n,s=!0){console.error(e)}let be=!1,ke=!1;const L=[];let z=0;const ae=[];let re=null,Q=0;const ce=[];let H=null,$=0;const bt=Promise.resolve();let De=null,Ce=null;function cn(e){const t=De||bt;return e?t.then(this?e.bind(this):e):t}function ln(e){let t=z+1,n=L.length;for(;t<n;){const s=t+n>>>1;le(L[s])<e?t=s+1:n=s}return t}function dn(e){(!L.length||!L.includes(e,be&&e.allowRecurse?z+1:z))&&e!==Ce&&(e.id==null?L.push(e):L.splice(ln(e.id),0,e),ht())}function ht(){!be&&!ke&&(ke=!0,De=bt.then(wt))}function _t(e,t,n,s){D(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),ht()}function un(e){_t(e,re,ae,Q)}function mn(e){_t(e,H,ce,$)}function Me(e,t=null){if(ae.length){for(Ce=t,re=[...new Set(ae)],ae.length=0,Q=0;Q<re.length;Q++)re[Q]();re=null,Q=0,Ce=null,Me(e,t)}}function pn(e){if(Me(),ce.length){const t=[...new Set(ce)];if(ce.length=0,H){H.push(...t);return}for(H=t,H.sort((n,s)=>le(n)-le(s)),$=0;$<H.length;$++)H[$]();H=null,$=0}}const le=e=>e.id==null?1/0:e.id;function wt(e){ke=!1,be=!0,Me(e),L.sort((n,s)=>le(n)-le(s));const t=it;try{for(z=0;z<L.length;z++){const n=L[z];n&&n.active!==!1&&te(n,null,14)}}finally{z=0,L.length=0,pn(),be=!1,De=null,(L.length||ae.length||ce.length)&&wt(e)}}let F=null,vt=null;function Fe(e){const t=F;return F=e,vt=e&&e.type.__scopeId||null,t}function g(e,t=F,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&We(-1);const r=Fe(t),l=e(...o);return Fe(r),s._d&&We(1),l};return s._n=!0,s._c=!0,s._d=!0,s}const gn=e=>e.__isSuspense;function fn(e,t){t&&t.pendingBranch?D(e)?t.effects.push(...e):t.effects.push(e):mn(e)}const Ve={};function bn(e,t,{immediate:n,deep:s,flush:o,onTrack:r,onTrigger:l}=rt){const c=W;let u,h=!1,S=!1;if(X(e)?(u=()=>e.value,h=je(e)):ee(e)?(u=()=>e,s=!0):D(e)?(S=!0,h=e.some(a=>ee(a)||je(a)),u=()=>e.map(a=>{if(X(a))return a.value;if(ee(a))return U(a);if(q(a))return te(a,c,2)})):q(e)?t?u=()=>te(e,c,2):u=()=>{if(!(c&&c.isUnmounted))return A&&A(),Se(e,c,3,[R])}:u=it,t&&s){const a=u;u=()=>U(a())}let A,R=a=>{A=x.onStop=()=>{te(a,c,4)}},M=S?[]:Ve;const N=()=>{if(!!x.active)if(t){const a=x.run();(s||h||(S?a.some((d,k)=>Be(d,M[k])):Be(a,M)))&&(A&&A(),Se(t,c,3,[a,M===Ve?void 0:M,R]),M=a)}else x.run()};N.allowRecurse=!!t;let B;o==="sync"?B=N:o==="post"?B=()=>Ue(N,c&&c.suspense):B=()=>un(N);const x=new tn(u,B);return t?n?N():M=x.run():o==="post"?Ue(x.run.bind(x),c&&c.suspense):x.run(),()=>{x.stop(),c&&c.scope&&zt(c.scope.effects,x)}}function hn(e,t,n){const s=this.proxy,o=V(e)?e.includes(".")?_n(s,e):()=>s[e]:e.bind(s,s);let r;q(t)?r=t:(r=t.handler,n=t);const l=W;Ye(this);const c=bn(o,r.bind(s),n);return l?Ye(l):Mn(),c}function _n(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function U(e,t){if(!G(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),X(e))U(e.value,t);else if(D(e))for(let n=0;n<e.length;n++)U(e[n],t);else if(ct(e)||at(e))e.forEach(n=>{U(n,t)});else if(dt(e))for(const n in e)U(e[n],t);return e}function ve(e,t){const n=F;if(n===null)return e;const s=At(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[l,c,u,h=rt]=t[r];q(l)&&(l={mounted:l,updated:l}),l.deep&&U(c),o.push({dir:l,instance:s,value:c,oldValue:void 0,arg:u,modifiers:h})}return e}const yt="components",wn="directives";function I(e,t){return St(yt,e,!0,t)||e}const vn=Symbol();function yn(e){return St(wn,e)}function St(e,t,n=!0,s=!1){const o=F||W;if(o){const r=o.type;if(e===yt){const c=Bn(r,!1);if(c&&(c===t||c===fe(t)||c===mt(fe(t))))return r}const l=Ge(o[e]||r[e],t)||Ge(o.appContext[e],t);return!l&&s?r:l}}function Ge(e,t){return e&&(e[t]||e[fe(t)]||e[mt(fe(t))])}function P(e,t,n,s){let o;const r=n&&n[s];if(D(e)||V(e)){o=new Array(e.length);for(let l=0,c=e.length;l<c;l++)o[l]=t(e[l],l,void 0,r&&r[l])}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r&&r[l])}else if(G(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,r&&r[c]));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];o[c]=t(e[h],h,c,r&&r[c])}}else o=[];return n&&(n[s]=o),o}const Pe=e=>e?En(e)?At(e)||e.proxy:Pe(e.parent):null,He=Y(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pe(e.parent),$root:e=>Pe(e.root),$emit:e=>e.emit,$options:e=>Sn(e),$forceUpdate:e=>e.f||(e.f=()=>dn(e.update)),$nextTick:e=>e.n||(e.n=cn.bind(e.proxy)),$watch:e=>hn.bind(e)});function Sn(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,c=r.get(t);let u;return c?u=c:!o.length&&!n&&!s?u=t:(u={},o.length&&o.forEach(h=>he(u,h,l,!0)),he(u,t,l)),r.set(t,u),u}function he(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&he(e,r,n,!0),o&&o.forEach(l=>he(e,l,n,!0));for(const l in t)if(!(s&&l==="expose")){const c=kn[l]||n&&n[l];e[l]=c?c(e[l],t[l]):t[l]}return e}const kn={data:ze,props:J,emits:J,methods:J,computed:J,beforeCreate:T,created:T,beforeMount:T,mounted:T,beforeUpdate:T,updated:T,beforeDestroy:T,beforeUnmount:T,destroyed:T,unmounted:T,activated:T,deactivated:T,errorCaptured:T,serverPrefetch:T,components:J,directives:J,watch:Pn,provide:ze,inject:Cn};function ze(e,t){return t?e?function(){return Y(q(e)?e.call(this,this):e,q(t)?t.call(this,this):t)}:t:e}function Cn(e,t){return J(Je(e),Je(t))}function Je(e){if(D(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function T(e,t){return e?[...new Set([].concat(e,t))]:t}function J(e,t){return e?Y(Y(Object.create(null),e),t):t}function Pn(e,t){if(!e)return t;if(!t)return e;const n=Y(Object.create(null),e);for(const s in t)n[s]=T(e[s],t[s]);return n}const Ue=fn,An=e=>e.__isTeleport,C=Symbol(void 0),Rn=Symbol(void 0),Ae=Symbol(void 0),pe=[];let O=null;function m(e=!1){pe.push(O=e?null:[])}function Nn(){pe.pop(),O=pe[pe.length-1]||null}let de=1;function We(e){de+=e}function kt(e){return e.dynamicChildren=de>0?O||Vt:null,Nn(),de>0&&O&&O.push(e),e}function f(e,t,n,s,o,r){return kt(i(e,t,n,s,o,r,!0))}function ie(e,t,n,s,o){return kt(b(e,t,n,s,o,!0))}function xn(e){return e?e.__v_isVNode===!0:!1}const Ct="__vInternal",Pt=({key:e})=>e!=null?e:null,ge=({ref:e,ref_key:t,ref_for:n})=>e!=null?V(e)||X(e)||q(e)?{i:F,r:e,k:t,f:!!n}:e:null;function i(e,t=null,n=null,s=0,o=null,r=e===C?0:1,l=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Pt(t),ref:t&&ge(t),scopeId:vt,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return c?(Ee(u,n),r&128&&e.normalize(u)):n&&(u.shapeFlag|=V(n)?8:16),de>0&&!l&&O&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&O.push(u),u}const b=Tn;function Tn(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===vn)&&(e=Ae),xn(e)){const c=Re(e,t,!0);return n&&Ee(c,n),de>0&&!r&&O&&(c.shapeFlag&6?O[O.indexOf(e)]=c:O.push(c)),c.patchFlag|=-2,c}if(Ln(e)&&(e=e.__vccOpts),t){t=qn(t);let{class:c,style:u}=t;c&&!V(c)&&(t.class=Te(c)),G(u)&&(gt(u)&&!D(u)&&(u=Y({},u)),t.style=xe(u))}const l=V(e)?1:gn(e)?128:An(e)?64:G(e)?4:q(e)?2:0;return i(e,t,n,s,o,l,r,!0)}function qn(e){return e?gt(e)||Ct in e?Y({},e):e:null}function Re(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:l}=e,c=t?Dn(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Pt(c),ref:t&&t.ref?n&&o?D(o)?o.concat(ge(t)):[o,ge(t)]:ge(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==C?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Re(e.ssContent),ssFallback:e.ssFallback&&Re(e.ssFallback),el:e.el,anchor:e.anchor}}function v(e=" ",t=0){return b(Rn,null,e,t)}function E(e="",t=!1){return t?(m(),ie(Ae,null,e)):b(Ae,null,e)}function Ee(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(D(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Ee(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(Ct in t)?t._ctx=F:o===3&&F&&(F.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else q(t)?(t={default:t,_ctx:F},n=32):(t=String(t),s&64?(n=16,t=[v(t)]):n=8);e.children=t,e.shapeFlag|=n}function Dn(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Te([t.class,s.class]));else if(o==="style")t.style=xe([t.style,s.style]);else if(Ht(o)){const r=t[o],l=s[o];l&&r!==l&&!(D(r)&&r.includes(l))&&(t[o]=r?[].concat(r,l):l)}else o!==""&&(t[o]=s[o])}return t}let W=null;const Ye=e=>{W=e,e.scope.on()},Mn=()=>{W&&W.scope.off(),W=null};function En(e){return e.vnode.shapeFlag&4}function At(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(rn(nn(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in He)return He[n](e)}}))}function Bn(e,t=!0){return q(e)?e.displayName||e.name:e.name||t&&e.__name}function Ln(e){return q(e)&&"__vccOpts"in e}function oe(e,t,n,s){e.addEventListener(t,n,s)}const Ke=e=>{const t=e.props["onUpdate:modelValue"]||!1;return D(t)?n=>Wt(t,n):t};function On(e){e.target.composing=!0}function Xe(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ze={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e._assign=Ke(o);const r=s||o.props&&o.props.type==="number";oe(e,t?"change":"input",l=>{if(l.target.composing)return;let c=e.value;n&&(c=c.trim()),r&&(c=Le(c)),e._assign(c)}),n&&oe(e,"change",()=>{e.value=e.value.trim()}),t||(oe(e,"compositionstart",On),oe(e,"compositionend",Xe),oe(e,"change",Xe))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},r){if(e._assign=Ke(r),e.composing||document.activeElement===e&&e.type!=="range"&&(n||s&&e.value.trim()===t||(o||e.type==="number")&&Le(e.value)===t))return;const l=t==null?"":t;e.value!==l&&(e.value=l)}};var In=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};function Qe(e){return Math.round(e*100)/100}function $e(e){theData.error=e}function _(e,t,n){if(e){$e(e);return}if(n===void 0||n)try{theData.res=t.toJavaScript?JSON.stringify(t.toJavaScript()):JSON.stringify(t.toObject())}catch{$e(e)}}function jn(e){const t={pos_pieces:[],joint_pieces:[],is_moving:e.is_moving||!1},n=[["x","X"],["y","Y"],["z","Z"],["theta","Theta"],["o_x","OX"],["o_y","OY"],["o_z","OZ"]];for(const s of n){const o=s[0];t.pos_pieces.push({endPosition:n[j],endPositionValue:e.end_position[o]||0})}for(let s=0;s<e.joint_positions.degrees.length;s++)t.joint_pieces.push({joint:s,jointValue:e.joint_positions.degrees[s]||0});return t}function Fn(e){return{analogsMap:e.analogs||[],digitalInterruptsMap:e.digital_interrupts||[]}}function Vn(e){const t={parts:[],is_moving:e.is_moving||!1};if(e.lengths_mm.length!==e.positions_mm.length)throw"gantry lists different lengths";for(let n=0;n<e.lengths_mm.length;n++)t.parts.push({axis:n,pos:e.positions_mm[n],length:e.lengths_mm[n]});return t}function Gn(e){return{eventsList:(e.events||[]).map(s=>({time:s.time||{},event:s.event||"",control:s.control||"",value:s.value||0}))}}function Hn(e){return{isPowered:e.is_powered||!1,positionReporting:e.position_reporting||!1,position:e.position||0,isMoving:e.is_moving||!1}}function zn(e){return{positionDeg:e.position_deg||0,is_moving:e.is_moving||!1}}function Jn(e,t){switch(theApp.resourceNameToSubtypeString(e)){case"rdk:component:arm":return jn(t);case"rdk:component:board":return Fn(t);case"rdk:component:gantry":return Vn(t);case"rdk:component:input_controller":return Gn(t);case"rdk:component:motor":return Hn(t);case"rdk:component:servo":return zn(t)}return t}function Un(e){const t={},n={};for(const s of e){const o=s.getName().toObject(),r=s.getStatus().toJavaScript(),l=Jn(o,r),c=theApp.resourceNameToString(o);t[c]=r,n[c]=l}theData.rawStatus=t,theData.status=n}const Wn={directives:{mapMounted(){theData.mapOnce||(theData.mapOnce=!0,Xn())}},data(){return{error:"",res:{},rawStatus:{},status:{},pcdClick:{},sensorReadings:{},resources:[],sensorNames:[],streamNames:[],intervalId:null,segmenterNames:[],segmenterParameterNames:[],segmenterParameters:{},segmentAlgo:"",fullcloud:null,objects:null,minPtsPlane:1e4,minPtsSegment:100,clusterRad:5,armToggle:{},mapOnce:!1,value:0,imuData:{},currentOps:[],setPin:"",getPin:"",locationValue:"40.745297,-74.010916",imageMapTemp:"",pcdMapTemp:null}},methods:{parameterType(e){return e==="int"||e==="float64"?"number":e==="string"||e==="char"?"text":""},getSegmenterNames(){const e=new visionApi.GetSegmenterNamesRequest;visionService.getSegmenterNames(e,{},(t,n)=>{if(_(t,n,!1),t){console.log("error getting segmenter names"),console.log(t);return}theData.segmenterNames=n.getSegmenterNamesList()})},getSegmenterParameters(e){this.segmentAlgo=e;const t=new visionApi.GetSegmenterParametersRequest;t.setSegmenterName(e),visionService.getSegmenterParameters(t,{},(n,s)=>{if(_(n,s,!1),n){console.log(`error getting segmenter parameters for ${e}`),console.log(n);return}theData.segmenterParameterNames=s.getSegmenterParametersList(),theData.segmenterParameters={}})},filterResources(e,t,n){return theData.resources.filter(s=>s.namespace===e&&s.type===t&&s.subtype===n).sort((s,o)=>s.name<o.name?-1:s.name>o.name?1:0)},resourceNameToSubtypeString(e){return`${e.namespace}:${e.type}:${e.subtype}`},resourceNameToString(e){return strName=theApp.resourceNameToSubtypeString(e),e.name!==""&&(strName+=`/${e.name}`),strName},stringToResourceName(e){const t=e.split("/");let n="";t.length===2&&(n=t[1]);const s=t[0].split(":");if(s.length>3)throw"more than 2 colons in resource name string";if(s.length<3)throw"less than 2 colons in resource name string";return{namespace:s[0],type:s[1],subtype:s[2],name:n}},resourceStatusByName(e){return theData.status[theApp.resourceNameToString(e)]},rawResourceStatusByName(e){return theData.rawStatus[theApp.resourceNameToString(e)]},gantryInc(e,t,n){const s=theApp.resourceStatusByName(e),o=[];for(let l=0;l<s.parts.length;l++)o[l]=s.parts[l].pos;o[t]+=n;const r=new gantryApi.MoveToPositionRequest;r.setName(e.name),r.setPositionsMmList(o),gantryService.moveToPosition(r,{},(l,c)=>_(l,c))},armEndPositionInc(e,t,n){const s=t[0]==="o"||t[0]==="O"?n/100:n,r=theApp.rawResourceStatusByName(e).end_position,l=new commonApi.Pose,c=[["x","X"],["y","Y"],["z","Z"],["theta","Theta"],["o_x","OX"],["o_y","OY"],["o_z","OZ"]];for(const A of c){const R=A[0],M=r[R]||0,N=`set${A[1]}`;l[N](M)}const u=`get${t}`,h=`set${t}`;l[h](l[u]()+s);const S=new armApi.MoveToPositionRequest;S.setName(e.name),S.setTo(l),armService.moveToPosition(S,{},(A,R)=>_(A,R))},armJointInc(e,t,n){const s=theApp.rawResourceStatusByName(e),o=new armApi.JointPositions,r=s.joint_positions.degrees;r[t]+=n,o.setDegreesList(r);const l=new armApi.MoveToJointPositionsRequest;l.setName(e.name),l.setPositionDegs(o),armService.moveToJointPositions(l,{},(c,u)=>_(c,u))},armHome(e){const t=theApp.rawResourceStatusByName(e),n=new armApi.JointPositions,s=t.joint_positions.degrees;for(let r=0;r<s.length;r++)s[r]=0;n.setDegreesList(s);const o=new armApi.MoveToJointPositionsRequest;o.setName(e.name),o.setPositionDegs(n),armService.moveToJointPositions(o,{},(r,l)=>_(r,l))},armModifyAll(e){const t=theApp.resourceStatusByName(e),n={pos_pieces:[],joint_pieces:[]};for(let s=0;s<t.pos_pieces.length;s++)n.pos_pieces.push({endPosition:t.pos_pieces[s].endPosition,endPositionValue:Qe(t.pos_pieces[s].endPositionValue)});for(let s=0;s<t.joint_pieces.length;s++)n.joint_pieces.push({joint:t.joint_pieces[s].joint,jointValue:Qe(t.joint_pieces[s].jointValue)});theData.armToggle[e.name]=n},armModifyAllCancel(e){delete theData.armToggle[e.name]},armModifyAllDoEndPosition(e){const t=new commonApi.Pose,n=theData.armToggle[e.name].pos_pieces;for(const o of n){const l=`set${o.endPosition[1]}`;t[l](o.endPositionValue)}const s=new armApi.MoveToPositionRequest;s.setName(e.name),s.setTo(t),armService.moveToPosition(s,{},(o,r)=>_(o,r)),delete theData.armToggle[e.name]},armModifyAllDoJoint(e){const t=theApp.rawResourceStatusByName(e),n=new armApi.JointPositions,s=t.joint_positions.degrees,o=theData.armToggle[e.name].joint_pieces;for(let l=0;l<o.length&&l<s.length;l++)s[o[l].joint]=o[l].jointValue;n.setDegreesList(s);const r=new armApi.MoveToJointPositionsRequest;r.setName(e.name),r.setPositionDegs(n),armService.moveToJointPositions(r,{},(l,c)=>_(l,c)),delete theData.armToggle[e.name]},gripperAction(e,t){let n;switch(t){case"open":n=new gripperApi.OpenRequest,n.setName(e),gripperService.open(n,{},(s,o)=>_(s,o));break;case"grab":n=new gripperApi.GrabRequest,n.setName(e),gripperService.grab(n,{},(s,o)=>_(s,o));break}},servoMove(e,t){const o=(theApp.rawResourceStatusByName(e).position_deg||0)+t,r=new servoApi.MoveRequest;r.setName(e.name),r.setAngleDeg(o),servoService.move(r,{},(l,c)=>_(l,c))},motorCommand(e,t){switch(t.type){case"go":MotorControlHelper.setPower(e,t.power*t.direction/100,(n,s)=>_(n,s));break;case"goFor":MotorControlHelper.goFor(e,t.rpm*t.direction,t.revolutions,(n,s)=>_(n,s));break;case"goTo":MotorControlHelper.goTo(e,t.rpm,t.position,(n,s)=>_(n,s));break}},motorStop(e){MotorControlHelper.stop(e,(t,n)=>_(t,n))},hasWebGamepad(){return theData.resources.some(e=>e.namespace==="rdk"&&e.type==="component"&&e.subtype==="input_controller"&&e.name==="WebGamepad")},filteredInputControllerList(){return theData.resources.filter(e=>e.namespace==="rdk"&&e.type==="component"&&e.subtype==="input_controller"&&e.name!=="WebGamepad")},inputInject(e){inputControllerService.triggerEvent(e,{},(t,n)=>_(t,n))},killOp(e){const t=new robotApi.KillOperationRequest;t.setId(e),robotService.killOperation(t,{},(n,s)=>_(n,s))},baseKeyboardCtl:function(e,t){if(Object.values(t).every(r=>r===!1)){console.log("All keyboard inputs false, stopping base."),this.handleBaseActionStop(e);return}const n=window.computeKeyboardBaseControls(t),s=new commonApi.Vector3,o=new commonApi.Vector3;s.setY(n.linear),o.setZ(n.angular),BaseControlHelper.setPower(e,s,o,(r,l)=>_(r,l))},handleBaseActionStop(e){const t=new baseApi.StopRequest;t.setName(e),baseService.stop(t,{},(n,s)=>_(n,s))},handleBaseSpin(e,t){BaseControlHelper.spin(e,t.angle*t.direction,t.speed,(n,s)=>_(n,s))},handleBaseStraight(e,t){if(t.movementType==="Continuous"){const n=new commonApi.Vector3;n.setY(t.speed*t.direction),BaseControlHelper.setVelocity(e,n,new commonApi.Vector3,(s,o)=>_(s,o))}else BaseControlHelper.moveStraight(e,t.distance,t.speed*t.direction,(n,s)=>_(n,s))},renderFrame(e){req=new cameraApi.RenderFrameRequest,req.setName(e);const t="image/jpeg";req.setMimeType(t),cameraService.renderFrame(req,{},(n,s)=>{if(_(n,s,!1),n)return;const o=new Blob([s.getData_asU8()],{type:t});window.open(URL.createObjectURL(o),"_blank")})},viewCameraFrame(e){clearInterval(this.intervalId);const t=this.streamNames[0];e==="manual"?this.viewManualFrame(t):e==="live"?this.viewCamera(t):this.viewIntervalFrame(t,e)},viewManualFrame(e){req=new cameraApi.RenderFrameRequest,req.setName(e);const t="image/jpeg";req.setMimeType(t),cameraService.renderFrame(req,{},(n,s)=>{if(_(n,s,!1),n)return;const o=document.getElementById(`stream-${e}`);o&&o.getElementsByTagName("video").length>0&&o.getElementsByTagName("video")[0].remove(),o&&o.getElementsByTagName("img").length>0&&o.getElementsByTagName("img")[0].remove();const r=new Image,l=new Blob([s.getData_asU8()],{type:t});r.src=URL.createObjectURL(l),o.append(r)})},viewIntervalFrame(e,t){this.intervalId=setInterval(()=>{req=new cameraApi.RenderFrameRequest,req.setName(e);const n="image/jpeg";req.setMimeType(n),cameraService.renderFrame(req,{},(s,o)=>{if(_(s,o,!1),s)return;const r=document.getElementById(`stream-${e}`);r&&r.getElementsByTagName("video").length>0&&r.getElementsByTagName("video")[0].remove(),r&&r.getElementsByTagName("img").length>0&&r.getElementsByTagName("img")[0].remove();const l=new Image,c=new Blob([o.getData_asU8()],{type:n});l.src=URL.createObjectURL(c),r.append(l)})},+t*1e3)},renderPCD(e){this.$nextTick(()=>{theData.pcdClick.pcdloaded=!1,theData.pcdClick.foundSegments=!1,tt(),y.cameraName=e,req=new cameraApi.GetPointCloudRequest,req.setName(e);const t="pointcloud/pcd";req.setMimeType(t),cameraService.getPointCloud(req,{},(n,s)=>{_(n,s,!1),!n&&(console.log("loading pcd"),theData.fullcloud=s.getPointCloud_asB64(),se(`data:${t};base64,${theData.fullcloud}`))})})},viewSLAMImageMap(){req=new slamApi.GetMapRequest,req.setName("UI");const e="image/jpeg";req.setMimeType(e),slamService.getMap(req,{},(t,n)=>{if(_(t,n,!1),t)return;console.log("loading image map");const s=new Blob([n.getImage_asU8()],{type:e});this.imageMapTemp=URL.createObjectURL(s)})},viewSLAMPCDMap(){req=new slamApi.GetMapRequest,req.setName("UI");const e="pointcloud/pcd";req.setMimeType(e),tt(),slamService.getMap(req,{},(t,n)=>{_(t,n,!1),!t&&(console.log("loading pcd map"),pcObject=n.getPointCloud(),theData.fullcloud=pcObject.getPointCloud_asB64(),se(`data:${e};base64,${theData.fullcloud}`))})},getReadings(e){const t=new sensorsApi.GetReadingsRequest,n=e.map(s=>{const o=new commonApi.ResourceName;return o.setNamespace(s.namespace),o.setType(s.type),o.setSubtype(s.subtype),o.setName(s.name),o});t.setSensorNamesList(n),sensorsService.getReadings(t,{},(s,o)=>{if(_(s,o,!1),!s)for(const r of o.getReadingsList()){const l=r.getReadingsList().map(c=>c.toJavaScript());theData.sensorReadings[theApp.resourceNameToString(r.getName().toObject())]=l}})},processFunctionResults:function(e,t){if(_(e,t,!1),e){document.getElementById("function_results").value=`${e}`;return}const n=t.getResultsList();let s="";if(n.length>0){s+=`Results: 
`;for(let o=0;o<n.length&&o<n.length;o++){const r=n[o];s+=`${o}: ${JSON.stringify(r.toJavaScript())}
`}}s+=`StdOut: ${t.getStdOut()}
`,s+=`StdErr: ${t.getStdErr()}
`,document.getElementById("function_results").value=s},nonEmpty(e){return Object.keys(e).length>0},hasKey(e,t){if(!e)return!1;if(Array.isArray(e)){for(const n of e)if(n===t||n.length>0&&n.length>0&&n[0]===t)return!0;return!1}return e.hasOwn(t)},grabClick(e){const t=new THREE.Vector2;t.x=e.offsetX/e.srcElement.offsetWidth*2-1,t.y=e.offsetY/e.srcElement.offsetHeight*-2+1,y.raycaster.setFromCamera(t,y.camera);const n=y.raycaster.intersectObjects(y.scene.children),s=n.length>0?n[0]:null;s!==null?(console.log(s.point),me(s.point)):console.log("no point intersected")},doPCDMove:function(){const e=theApp.filterResources("rdk","component","gripper")[0],t=y.cameraName,n=theData.pcdClick.x,s=theData.pcdClick.y,o=theData.pcdClick.z,r=new motionApi.MoveRequest,l=new commonApi.Pose;l.setX(n),l.setY(s),l.setZ(o);const c=new commonApi.PoseInFrame;c.setReferenceFrame(t),c.setPose(l),r.setDestination(c);const u=new commonApi.ResourceName;u.setNamespace(e.namespace),u.setType(e.type),u.setSubtype(e.subtype),u.setName(e.name),r.setComponentName(u),console.log(`making move attempt using ${e}`),motionService.move(r,{},(h,S)=>(_(h,S),h?Promise.reject(h):Promise.resolve(S).then(console.log(`move success: ${S.getSuccess()}`))))},findSegments:function(e,t){console.log("parameters for segmenter below:"),console.log(t),theData.pcdClick.calculatingSegments=!0,theData.pcdClick.foundSegments=!1;const n=new visionApi.GetObjectPointCloudsRequest;n.setCameraName(y.cameraName),n.setSegmenterName(e),n.setParameters(proto.google.protobuf.Struct.fromJavaScript(t));const s="pointcloud/pcd";n.setMimeType(s),console.log("finding object segments..."),visionService.getObjectPointClouds(n,{},(o,r)=>{if(_(o,r,!1),o){console.log("error getting segments"),console.log(o),theData.pcdClick.calculatingSegments=!1;return}console.log("got pcd segments"),theData.pcdClick.foundSegments=!0,theData.objects=r.getObjectsList(),theData.pcdClick.calculatingSegments=!1})},doSegmentLoad:function(e){const t=theData.objects[e],n=t.getPointCloud_asB64(),s=t.getGeometries().getGeometriesList()[0].getCenter(),o=t.getGeometries().getGeometriesList()[0].getBox(),r={x:s.getX()/1e3,y:s.getY()/1e3,z:s.getZ()/1e3};console.log(r),me(r),nt(o,r),se(`data:pointcloud/pcd;base64,${n}`)},doPointLoad:function(e){const n=theData.objects[e].getGeometries().getGeometriesList()[0].getCenter(),s={x:n.getX()/1e3,y:n.getY()/1e3,z:n.getZ()/1e3};console.log(s),me(s)},doBoundingBoxLoad:function(e){const t=theData.objects[e],n=t.getGeometries().getGeometriesList()[0].getCenter(),s=t.getGeometries().getGeometriesList()[0].getBox(),o={x:n.getX()/1e3,y:n.getY()/1e3,z:n.getZ()/1e3};nt(s,o)},doPCDLoad:function(e){se(`data:pointcloud/pcd;base64,${e}`)},doCenterPCDLoad:function(e){se(`data:pointcloud/pcd;base64,${e}`);const n={x:0/1e3,y:0/1e3,z:0/1e3};console.log(n),me(n)},doPCDDownload:function(e){const t="pointcloud/pcd";window.open(`data:${t};base64,${e}`)},doSelectObject:function(e,t){switch(console.log(e),console.log(t),e){case"Center Point":this.doSegmentLoad(t);break;case"Bounding Box":this.doBoundingBoxLoad(t);break;case"Cropped":this.doPointLoad(t);break}},setNavigationMode:function(e){let t=navigationApi.Mode.MODE_UNSPECIFIED;switch(e){case"manual":t=navigationApi.Mode.MODE_MANUAL;break;case"waypoint":t=navigationApi.Mode.MODE_WAYPOINT;break}const n=new navigationApi.SetModeRequest;n.setMode(t),navigationService.setMode(n,{},(s,o)=>_(s,o))},setNavigationLocation:function(e){const t=document.getElementById(e).value.split(",");if(t.length!==2)return;const n=Number.parseFloat(t[0]),s=Number.parseFloat(t[1]),o=new robotApi.ResourceRunCommandRequest;let r="";if(gpses=theApp.filterResources("rdk","component","gps"),gpses.length>0)r=gpses[0].name;else{theData.error="no gps device found";return}o.setResourceName(r),o.setCommandName("set_location"),o.setArgs(proto.google.protobuf.Struct.fromJavaScript({latitude:n,longitude:s})),robotService.resourceRunCommand(o,{},(l,c)=>_(l,c))},viewCamera:function(e){const t=document.getElementById(`stream-${e}`),n=new streamApi.AddStreamRequest;n.setName(e),streamService.addStream(n,{},(s,o)=>{if(_(s,o,!1),t&&t.getElementsByTagName("img").length>0&&t.getElementsByTagName("img")[0].remove(),s){theData.error="no live camera device found";return}})},viewPreviewCamera:function(e){const t=new streamApi.AddStreamRequest;t.setName(e),streamService.addStream(t,{},(n,s)=>{if(_(n,s,!1),n){theData.error="no live camera device found";return}})},displayRadiansInDegrees:function(e){let t=e*180;for(;t<0;)t+=360;for(;t>360;)t-=360;return t.toFixed(1)},getGPIO:function(e){const t=document.getElementById(`get_pin_${e}`).value;BoardControlHelper.getGPIO(e,t,(n,s)=>{if(n){console.log(n);return}const o=s.toObject();document.getElementById(`get_pin_value_${e}`).innerHTML=`Pin: ${t} is ${o.high?"high":"low"}`})},setGPIO:function(e){const t=document.getElementById(`set_pin_${e}`).value,n=document.getElementById(`set_pin_v_${e}`).value;BoardControlHelper.setGPIO(e,t,n==="high",_)},isWebRtcEnabled(){return window.webrtcEnabled}}},Rt=["arm","gantry","board","servo","motor","input_controller"],Nt=function(){const e=new robotApi.GetOperationsRequest;robotService.getOperations(e,{},(t,n)=>{const s=n.toObject().operationsList;theData.currentOps=s}),setTimeout(Nt,500)},xt=async function(){let e,t;const n=new Promise((r,l)=>{e=r,t=l});let s=!1,o=!1;robotService.resourceNames(new robotApi.ResourceNamesRequest,{},(r,l)=>{if(_(r,l,!1),r){t(r);return}resources=l.toObject().resourcesList;const c=new Set(theData.resources.map(h=>theApp.resourceNameToString(h))),u=new Set(resources.map(h=>theApp.resourceNameToString(h)));for(const h of u)c.has(h)?c.delete(h):c.add(h);if(c.size>0){s=!0;for(const h of c){const S=theApp.stringToResourceName(h);if(S.namespace==="rdk"&&S.type==="component"&&Rt.includes(S.subtype)){o=!0;break}}}theData.resources=resources,e(null)}),await n,s===!0&&(Yn(),o===!0&&_e()),setTimeout(()=>xt(),500)},Yn=function(){let e,t;p=new Promise((n,s)=>{e=n,t=s}),sensorsService.getSensors(new sensorsApi.GetSensorsRequest,{},(n,s)=>{if(_(n,s,!1),n){t(n);return}theData.sensorNames=s.toObject().sensorNamesList,e(null)})},Tt=async function(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});streamService.listStreams(new streamApi.ListStreamsRequest,{},(s,o)=>{if(_(s,o,!1),s){t(s);return}const r=o.toObject().namesList;theData.streamNames=r,e(null)}),await n,setTimeout(()=>Tt(),500)};let Z,qt=Date.now();const et=3e3,Dt=function(){if(Date.now()-qt>et){_e();return}setTimeout(Dt,et)},_e=async function(){if(Z){Z.cancel();try{console.log("reconnecting"),await window.connect()}catch(o){console.error("failed to reconnect; retrying:",o),setTimeout(()=>_e(),1e3)}}let e=[];for(const o of Rt)e=e.concat(theApp.filterResources("rdk","component",o));const t=e.map(o=>{const r=new commonApi.ResourceName;return r.setNamespace(o.namespace),r.setType(o.type),r.setSubtype(o.subtype),r.setName(o.name),r}),n=new robotApi.StreamStatusRequest;n.setResourceNamesList(t),n.setEvery(new proto.google.protobuf.Duration().setNanos(5e8)),Z=robotService.streamStatus(n);let s=!0;Z.on("data",o=>{qt=Date.now(),Un(o.getStatusList()),s&&(s=!1,Dt())}),Z.on("status",o=>{console.log("error streaming robot status"),console.log(o),console.log(o.code," ",o.details)}),Z.on("end",()=>{console.log("done streaming robot status"),setTimeout(()=>_e(),1e3)})};xt();Nt();window.streamService&&Tt();let y=null;function tt(){if(y)return;theData.pcdClick.enable=!0,console.log("initing pcd");const e=new THREE.SphereGeometry(.009,32,32),t=new THREE.MeshBasicMaterial({color:16711680});y={scene:new THREE.Scene,camera:new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,2e3),renderer:new THREE.WebGLRenderer,raycaster:new THREE.Raycaster,sphere:new THREE.Mesh(e,t)},y.renderer.setSize(window.innerWidth/2,window.innerHeight/2),document.getElementById("pcd").append(y.renderer.domElement),y.controls=new orbitLib.OrbitControls(y.camera,y.renderer.domElement),y.camera.position.set(0,0,0),y.controls.target.set(0,0,-1),y.controls.update(),y.camera.updateMatrix(),console.log("pcd init done")}function Kn(e){const t=e.domElement,n=t.clientWidth,s=t.clientHeight,o=t.width!==n||t.height!==s;return o&&e.setSize(n,s,!1),o}function Mt(){if(Kn(y.renderer)){const e=y.renderer.domElement;y.camera.aspect=e.clientWidth/e.clientHeight,y.camera.updateProjectionMatrix()}y.renderer.render(y.scene,y.camera),y.controls.update(),requestAnimationFrame(Mt)}function se(e){new pcdLib.PCDLoader().load(e,n=>{y.scene.clear(),y.scene.add(n),y.scene.add(y.sphere),y.cube&&y.scene.add(y.cube),Mt()},()=>{},n=>{console.log(n)}),theData.pcdClick.pcdloaded=!0}function ye(e){return Math.round(e*1e3)}function me(e){theData.pcdClick.x=ye(e.x),theData.pcdClick.y=ye(e.y),theData.pcdClick.z=ye(e.z),y.sphere.position.copy(e)}function nt(e,t){const n=new THREE.BoxGeometry(e.getWidthMm()/1e3,e.getLengthMm()/1e3,e.getDepthMm()/1e3),s=new THREE.EdgesGeometry(n),o=new THREE.LineBasicMaterial({color:16711680}),r=new THREE.LineSegments(s,o);r.position.copy(t),r.name="bounding-box",y.scene.remove(y.scene.getObjectByName("bounding-box")),y.cube=r,y.scene.add(r)}async function ot(e,t,n){console.debug("connecting");const s=document.getElementById("connecting-error");s.innerHTML="",document.getElementById("connecting").classList.remove("hidden");try{await window.connect(e,t)}catch(o){const r=`failed to connect: ${o}`;console.error(r),s.classList.remove("hidden").innerHTML=r,n&&setTimeout(n,1e3);return}console.debug("connected"),document.getElementById("pre-app").classList.add("hidden"),await startup()}function Et(){if(window.supportedAuthTypes.length===0){ot(window.bakedAuth.authEntity,window.bakedAuth.creds,Et);return}const e=[],t=()=>{for(elem of e)elem.disabled=!0};for(authType of window.supportedAuthTypes){const n=document.getElementById(`auth-${authType}`),s=n.getElementsByTagName("input")[0],o=n.getElementsByTagName("button")[0];e.push(s,o);const r=()=>{t();const l={type:authType,payload:s.value};ot("",l,"")};o.addEventListener("click",()=>r()),s.addEventListener("keyup",l=>{l.key.toLowerCase()==="enter"&&r()})}}async function Xn(){await Zn,window.map=new google.maps.Map(document.getElementById("map"),{zoom:18}),window.map.addListener("click",l=>{const c=new navigationApi.AddWaypointRequest,u=new commonApi.GeoPoint;u.setLatitude(l.latLng.lat()),u.setLongitude(l.latLng.lng()),c.setLocation(u),navigationService.addWaypoint(c,{},(h,S)=>_(h,S))});let e=!1;const t={};let n=0;const s=function(){const l=new navigationApi.GetWaypointsRequest;navigationService.getWaypoints(l,{},(c,u)=>{if(_(c,u,!1),c){console.log(c),setTimeout(s,1e3);return}let h=[];u&&(h=u.getWaypointsList());const S={};for(const R of h){const M={lat:R.getLocation().getLatitude(),lng:R.getLocation().getLongitude()},N=JSON.stringify(M);if(t[N]){S[N]=t[N];continue}const B=new google.maps.Marker({position:M,map:window.map,label:`${n++}`});S[N]=B,t[N]=B,B.addListener("click",()=>{console.log("clicked on marker",M)}),B.addListener("dblclick",()=>{const x=new navigationApi.RemoveWaypointRequest;x.setId(R.getId()),navigationService.removeWaypoint(x,{},(a,d)=>_(a,d))})}const A=Object.keys(t).filter(R=>!(R in S));for(key of A)t[key].setMap(null),delete t[key];setTimeout(s,1e3)})};s();const o=new google.maps.Marker({label:"robot"}),r=function(){const l=new navigationApi.GetLocationRequest;navigationService.getLocation(l,{},(c,u)=>{if(_(c,u,!1),c){console.log(c),setTimeout(r,1e3);return}const h={lat:u.getLocation().getLatitude(),lng:u.getLocation().getLongitude()};e||(e=!0,window.map.setCenter(h)),o.setPosition(h),o.setMap(window.map),setTimeout(r,1e3)})};r()}window.initMap=()=>Bt();let Bt;const Zn=new Promise(e=>{Bt=e});function Lt(){const e=theApp.filterResources("rdk","component","imu");for(const t of e){const n=t.name;theData.imuData[n]||(theData.imuData[n]={});{const s=new imuApi.ReadOrientationRequest;s.setName(n),imuService.readOrientation(s,{},(o,r)=>{if(o){console.log(o);return}theData.imuData[n].orientation=r.toObject().orientation})}{const s=new imuApi.ReadAngularVelocityRequest;s.setName(n),imuService.readAngularVelocity(s,{},(o,r)=>{if(o){console.log(o);return}theData.imuData[n].angularVelocity=r.toObject().angularVelocity})}{const s=new imuApi.ReadAccelerationRequest;s.setName(n),imuService.readAcceleration(s,{},(o,r)=>{if(o){console.log(o);return}theData.imuData[n].acceleration=r.toObject().acceleration})}{const s=new imuApi.ReadMagnetometerRequest;s.setName(n),imuService.readMagnetometer(s,{},(o,r)=>{if(o){console.log(o);return}theData.imuData[n].magnetometer=r.toObject().magnetometer})}}setTimeout(Lt,500)}Lt();Et();const Qn={id:"pre-app"},$n=i("div",{id:"connecting-error",class:"hidden border-l-4 border-danger-500 bg-gray-100 px-4 py-3",role:"alert"},null,-1),eo={id:"connecting",class:"hidden border-l-4 border-greendark bg-gray-100 px-4 py-3"},to=v(" Connecting via "),no=v(" WebRTC "),oo=v(" gRPC "),so=v("... "),ro=["id"],io=i("input",{class:"mb-2 appearance-none block w-full border text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-colors duration-150 ease-in-out p-2",type:"password"},null,-1),ao=i("button",{class:"relative leading-tight font-button transition-colors duration-150 focus:outline-none shadow-sm text-black border border-black bg-primary hover:border-black hover:bg-gray-200 focus:bg-gray-400 active:bg-gray-400 cursor-pointer px-5 py-2"}," Login ",-1),co=[io,ao],lo={class:"p-2"},uo={style:{color:"red"}},mo={key:0},po={class:"camera"},go={key:1},fo={class:"flex"},bo={class:"p-4 text-xl"},ho={class:"border border-black border-t-0 p-4"},_o={class:"border border-black border-t-0 p-4"},wo=i("thead",null,[i("tr",null,[i("th",{class:"border border-black p-2"}," axis "),i("th",{class:"border border-black p-2",colspan:"2"}," position "),i("th",{class:"border border-black p-2"}," length ")])],-1),vo={class:"border border-black p-2"},yo={class:"border border-black p-2"},So=v(" -- "),ko=v(" - "),Co=v(" + "),Po=v(" ++ "),Ao={class:"border border-black p-2"},Ro={class:"border border-black p-2"},No={class:"flex"},xo={class:"p-4 text-xl"},To={class:"flex border border-black border-t-0 p-4"},qo={class:"w-1/4 mr-4"},Do=i("h3",{class:"mb-1"}," Orientation (degrees) ",-1),Mo={class:"w-full border border-black border-t-0 p-4"},Eo=i("th",{class:"border border-black p-2"}," Roll ",-1),Bo={class:"border border-black p-2"},Lo=i("th",{class:"border border-black p-2"}," Pitch ",-1),Oo={class:"border border-black p-2"},Io=i("th",{class:"border border-black p-2"}," Yaw ",-1),jo={class:"border border-black p-2"},Fo={class:"w-1/4 mr-4"},Vo=i("h3",{class:"mb-1"}," Angular Velocity (degrees/second) ",-1),Go={class:"w-full border border-black border-t-0 p-4"},Ho=i("th",{class:"border border-black p-2"}," X ",-1),zo={class:"border border-black p-2"},Jo=i("th",{class:"border border-black p-2"}," Y ",-1),Uo={class:"border border-black p-2"},Wo=i("th",{class:"border border-black p-2"}," Z ",-1),Yo={class:"border border-black p-2"},Ko={class:"w-1/4 mr-4"},Xo=i("h3",{class:"mb-1"}," Acceleration (mm/second/second) ",-1),Zo={class:"w-full border border-black border-t-0 p-4"},Qo=i("th",{class:"border border-black p-2"}," X ",-1),$o={class:"border border-black p-2"},es=i("th",{class:"border border-black p-2"}," Y ",-1),ts={class:"border border-black p-2"},ns=i("th",{class:"border border-black p-2"}," Z ",-1),os={class:"border border-black p-2"},ss={class:"w-1/4"},rs=i("h3",{class:"mb-1"}," Magnetometer (gauss) ",-1),is={class:"w-full border border-black border-t-0 p-4"},as=i("th",{class:"border border-black p-2"}," X ",-1),cs={class:"border border-black p-2"},ls=i("th",{class:"border border-black p-2"}," Y ",-1),ds={class:"border border-black p-2"},us=i("th",{class:"border border-black p-2"}," Z ",-1),ms={class:"border border-black p-2"},ps={class:"flex"},gs={class:"p-4 text-xl"},fs={class:"border border-black border-t-0 p-4"},bs={class:"flex mb-2"},hs={key:0,class:"border border-black p-4 w-1/2 mr-4"},_s=i("h3",{class:"mb-2"}," END POSITION (mms) ",-1),ws={class:"grid grid-cols-2 gap-1 pb-1"},vs={class:"pr-2 py-1 text-right"},ys=["onUpdate:modelValue"],Ss={class:"flex mt-2"},ks=v(" Go To End Position "),Cs={class:"flex-auto text-right"},Ps=v(" Cancel "),As={key:1,class:"border border-black p-4 w-1/2"},Rs=i("h3",{class:"mb-2"}," JOINTS (degrees) ",-1),Ns={class:"grid grid-cols-2 gap-1 pb-1"},xs={class:"pr-2 py-1 text-right"},Ts=["onUpdate:modelValue"],qs={class:"flex mt-2"},Ds=v(" Go To Joints "),Ms={class:"flex-auto text-right"},Es=v(" Cancel "),Bs={class:"flex mb-2"},Ls={key:0,class:"border border-black p-4 w-1/2 mr-4"},Os=i("h3",{class:"mb-2"}," END POSITION (mms) ",-1),Is={class:"grid grid-cols-6 gap-1 pb-1"},js={class:"pr-2 py-1 text-right"},Fs=v(" -- "),Vs=v(" - "),Gs=v(" + "),Hs=v(" ++ "),zs={class:"py-1"},Js={class:"flex mt-2"},Us=v(" Home "),Ws={class:"flex-auto text-right"},Ys=v(" Modify All "),Ks={key:1,class:"border border-black p-4 w-1/2"},Xs=i("h3",{class:"mb-2"}," JOINTS (degrees) ",-1),Zs={class:"grid grid-cols-6 gap-1 pb-1"},Qs={class:"pr-2 py-1 text-right whitespace-nowrap"},$s=v(" -- "),er=v(" - "),tr=v(" + "),nr=v(" ++ "),or={class:"pl-2 py-1"},sr={class:"flex mt-2"},rr=v(" Home "),ir={class:"flex-auto text-right"},ar=v(" Modify All "),cr={class:"pb-8"},lr=i("div",{class:"flex"},[i("h2",{class:"p-4 text-xl"}," Gripper { gripper.name } ")],-1),dr={class:"flex border border-black border-t-0 p-4"},ur=v(" Open "),mr=v(" Grab "),pr={class:"flex"},gr={class:"p-4 text-xl"},fr={class:"flex border border-black border-t-0 p-4"},br={class:"table-auto border-collapse border border-black"},hr=i("td",{class:"border border-black p-2"}," Angle ",-1),_r={class:"border border-black p-2"},wr=i("td",{class:"border border-black p-2"},null,-1),vr={class:"border border-black p-2"},yr=v(" -10 "),Sr=v(" -1 "),kr=v(" 1 "),Cr=v(" 10 "),Pr={class:"flex"},Ar={class:"p-4 text-xl"},Rr={class:"border border-black border-t-0 p-4"},Nr=i("h3",{class:"mb-2"}," Analogs ",-1),xr={class:"mb-4 table-auto border border-black"},Tr={class:"border border-black p-2"},qr={class:"border border-black p-2"},Dr=i("h3",{class:"mb-2"}," GPIO ",-1),Mr={class:"mb-4 table-auto border border-black"},Er={class:"border border-black p-2"},Br={class:"border border-black p-2"},Lr=i("h3",{class:"mb-2"}," DigiGPIOtalInterrupts ",-1),Or={class:"mb-4 table-auto border border-black"},Ir=i("th",{class:"border border-black p-2"}," Get ",-1),jr={class:"border border-black p-2"},Fr={class:"flex"},Vr=i("label",{class:"pr-2 py-2 text-right"},"Pin:",-1),Gr=v(" Get "),Hr=["id"],zr=i("th",{class:"border border-black p-2"}," Set ",-1),Jr={class:"p-2"},Ur={class:"flex"},Wr=i("label",{class:"pr-2 py-2 text-right"},"Pin:",-1),Yr=["id"],Kr=i("option",null,"low",-1),Xr=i("option",null,"high",-1),Zr=[Kr,Xr],Qr=v(" Set "),$r={key:6,class:"pb-8"},ei=i("div",{class:"flex"},[i("h2",{class:"p-4 text-xl"}," Sensors ")],-1),ti={class:"border border-black border-t-0 p-4"},ni={class:"table-auto border border-black"},oi=i("th",{class:"border border-black p-2"}," Name ",-1),si=i("th",{class:"border border-black p-2"}," Type ",-1),ri=i("th",{class:"border border-black p-2"}," Readings ",-1),ii={class:"border border-black p-2 text-center"},ai=v(" Get All Readings "),ci={class:"border border-black p-2"},li={class:"border border-black p-2"},di={class:"border border-black p-2"},ui={class:"border border-black p-2 text-center"},mi=v(" Get Readings "),pi={key:7,id:"map-container",class:"pb-8"},gi=i("div",{class:"flex"},[i("h2",{class:"p-4 text-xl"}," Get Segments ")],-1),fi={class:"border border-black border-t-0 p-4"},bi={class:"mb-2"},hi=v(" Manual "),_i=v(" Waypoint "),wi={class:"mb-2"},vi=v(" Try Set Location "),yi={id:"map",class:"mb-2"},Si={class:"pb-8"},ki=i("div",{class:"flex"},[i("h2",{class:"p-4 text-xl"}," Current Operations ")],-1),Ci={class:"border border-black border-t-0 p-4"},Pi={class:"w-full table-auto border border-black"},Ai=i("tr",null,[i("th",{class:"border border-black p-2"}," id "),i("th",{class:"border border-black p-2"}," method "),i("th",{class:"border border-black p-2"}," elapsed time "),i("th",{class:"border border-black p-2"})],-1),Ri={class:"border border-black p-2"},Ni={class:"border border-black p-2"},xi={class:"border border-black p-2"},Ti={class:"border border-black p-2 text-center"},qi=v(" Kill "),Di={key:8,class:"slam pb-8"};function Mi(e,t,n,s,o,r){const l=I("viam-base"),c=I("viam-button"),u=I("Collapse"),h=I("motor-detail"),S=I("input-controller"),A=I("web-gamepad"),R=I("number-input"),M=I("viam-input"),N=I("camera"),B=I("slam"),x=yn("map-mounted");return m(),f(C,null,[i("div",Qn,[$n,i("div",eo,[to,r.isWebRtcEnabled()?(m(),f(C,{key:0},[no],64)):(m(),f(C,{key:1},[oo],64)),so]),(m(!0),f(C,null,P(e.supportedAuthTypes,a=>(m(),f(C,{key:a},[i("span",null,w(a)+": ",1),i("div",{id:`auth-${a}`,class:"w-96"},co,8,ro)],64))),128))]),i("div",null,[i("div",lo,[i("div",uo,w(o.error),1),(m(!0),f(C,null,P(r.filterResources("rdk","component","base"),a=>(m(),f("div",{key:a.name,class:"base pb-8"},[o.streamNames.length===0?(m(),f("div",mo,[i("div",po,[b(l,{"base-name":a.name,"connected-camera":!1,crumbs:["base",a.name],onKeyboardCtl:d=>r.baseKeyboardCtl(a.name,d),onBaseSpin:d=>r.handleBaseSpin(a.name,d),onBaseStraight:d=>r.handleBaseStraight(a.name,d),onBaseStop:d=>r.handleBaseActionStop(a.name)},null,8,["base-name","crumbs","onKeyboardCtl","onBaseSpin","onBaseStraight","onBaseStop"])])])):(m(),f("div",go,[(m(!0),f(C,null,P(o.streamNames,d=>(m(),f("div",{key:d,class:"camera"},[b(l,{"base-name":a.name,"stream-name":d,crumbs:["base",a.name],onBaseChangeTab:k=>r.viewPreviewCamera(d),onKeyboardCtl:k=>r.baseKeyboardCtl(a.name,k),onBaseSpin:k=>r.handleBaseSpin(a.name,k),onBaseStraight:k=>r.handleBaseStraight(a.name,k),onBaseStop:k=>r.handleBaseActionStop(a.name),onShowBaseCamera:k=>r.viewPreviewCamera(d)},null,8,["base-name","stream-name","crumbs","onBaseChangeTab","onKeyboardCtl","onBaseSpin","onBaseStraight","onBaseStop","onShowBaseCamera"])]))),128))]))]))),128)),r.resourceStatusByName(e.gantry)?(m(!0),f(C,{key:0},P(r.filterResources("rdk","component","gantry"),a=>(m(),f("div",{key:a.name,class:"pb-8"},[b(u,null,{content:g(()=>[i("div",ho,[i("table",_o,[wo,i("tbody",null,[(m(!0),f(C,null,P(r.resourceStatusByName(a).parts,d=>(m(),f("tr",{key:d.axis},[i("th",vo,w(d.axis),1),i("td",yo,[b(c,{group:"",onClick:k=>r.gantryInc(a,d.axis,-10)},{default:g(()=>[So]),_:2},1032,["onClick"]),b(c,{group:"",onClick:k=>r.gantryInc(a,d.axis,-1)},{default:g(()=>[ko]),_:2},1032,["onClick"]),b(c,{group:"",onClick:k=>r.gantryInc(a,d.axis,1)},{default:g(()=>[Co]),_:2},1032,["onClick"]),b(c,{group:"",onClick:k=>r.gantryInc(a,d.axis,10)},{default:g(()=>[Po]),_:2},1032,["onClick"])]),i("td",Ao,w(d.pos.toFixed(2)),1),i("td",Ro,w(d.length),1)]))),128))])])])]),default:g(()=>[i("div",fo,[i("h2",bo," Gantry "+w(a.name),1)])]),_:2},1024)]))),128)):E("",!0),(m(!0),f(C,null,P(r.filterResources("rdk","component","imu").entries(),(a,d)=>(m(),f("div",{key:a[1].name,class:"pb-8"},[b(u,null,{content:g(()=>[i("div",To,[o.imuData[a[1].name]&&o.imuData[a[1].name].angularVelocity?(m(),f(C,{key:0},[i("div",qo,[Do,i("table",Mo,[i("tr",null,[Eo,i("td",Bo,w(o.imuData[a[1].name].orientation.rollDeg.toFixed(2)),1)]),i("tr",null,[Lo,i("td",Oo,w(o.imuData[a[1].name].orientation.pitchDeg.toFixed(2)),1)]),i("tr",null,[Io,i("td",jo,w(o.imuData[a[1].name].orientation.yawDeg.toFixed(2)),1)])])]),i("div",Fo,[Vo,i("table",Go,[i("tr",null,[Ho,i("td",zo,w(o.imuData[a[1].name].angularVelocity.xDegsPerSec.toFixed(2)),1)]),i("tr",null,[Jo,i("td",Uo,w(o.imuData[a[1].name].angularVelocity.yDegsPerSec.toFixed(2)),1)]),i("tr",null,[Wo,i("td",Yo,w(o.imuData[a[1].name].angularVelocity.zDegsPerSec.toFixed(2)),1)])])]),i("div",Ko,[Xo,i("table",Zo,[i("tr",null,[Qo,i("td",$o,w(o.imuData[a[1].name].acceleration.xMmPerSecPerSec.toFixed(2)),1)]),i("tr",null,[es,i("td",ts,w(o.imuData[a[1].name].acceleration.yMmPerSecPerSec.toFixed(2)),1)]),i("tr",null,[ns,i("td",os,w(o.imuData[a[1].name].acceleration.zMmPerSecPerSec.toFixed(2)),1)])])]),i("div",ss,[rs,i("table",is,[i("tr",null,[as,i("td",cs,w(o.imuData[a[1].name].magnetometer.xGauss.toFixed(2)),1)]),i("tr",null,[ls,i("td",ds,w(o.imuData[a[1].name].magnetometer.yGauss.toFixed(2)),1)]),i("tr",null,[us,i("td",ms,w(o.imuData[a[1].name].magnetometer.zGauss.toFixed(2)),1)])])])],64)):E("",!0)])]),default:g(()=>[i("div",No,[i("h2",xo," IMU: "+w(a[1].name),1)])]),_:2},1024)]))),128)),(m(!0),f(C,null,P(r.filterResources("rdk","component","arm"),a=>(m(),f("div",{key:a.name,class:"pb-8"},[b(u,null,{content:g(()=>[i("div",fs,[i("div",bs,[o.armToggle[a.name]?(m(),f("div",hs,[_s,i("div",ws,[(m(!0),f(C,null,P(o.armToggle[a.name].pos_pieces,d=>(m(),f(C,{key:d.endPosition[0]},[i("label",vs,w(d.endPosition[1]),1),ve(i("input",{"onUpdate:modelValue":k=>d.endPositionValue=k,class:"border border-black py-1 px-4"},null,8,ys),[[Ze,d.endPositionValue]])],64))),128))]),i("div",Ss,[i("div",null,[b(c,{class:"mr-4 whitespace-nowrap",onClick:d=>r.armModifyAllDoEndPosition(a)},{default:g(()=>[ks]),_:2},1032,["onClick"])]),i("div",Cs,[b(c,{onClick:d=>r.armModifyAllCancel(a)},{default:g(()=>[Ps]),_:2},1032,["onClick"])])])])):E("",!0),o.armToggle[a.name]?(m(),f("div",As,[Rs,i("div",Ns,[(m(!0),f(C,null,P(o.armToggle[a.name].joint_pieces,d=>(m(),f(C,{key:d.joint},[i("label",xs,"Joint "+w(d.joint),1),ve(i("input",{"onUpdate:modelValue":k=>d.jointValue=k,class:"border border-black py-1 px-4"},null,8,Ts),[[Ze,d.jointValue]])],64))),128))]),i("div",qs,[i("div",null,[b(c,{onClick:d=>r.armModifyAllDoJoint(a)},{default:g(()=>[Ds]),_:2},1032,["onClick"])]),i("div",Ms,[b(c,{onClick:d=>r.armModifyAllCancel(a)},{default:g(()=>[Es]),_:2},1032,["onClick"])])])])):E("",!0)]),i("div",Bs,[r.resourceStatusByName(a)?(m(),f("div",Ls,[Os,i("div",Is,[(m(!0),f(C,null,P(r.resourceStatusByName(a).pos_pieces,d=>(m(),f(C,{key:d.endPosition[0]},[i("h4",js,w(d.endPosition[1]),1),b(c,{onClick:k=>r.armEndPositionInc(a,d.endPosition[1],-10)},{default:g(()=>[Fs]),_:2},1032,["onClick"]),b(c,{onClick:k=>r.armEndPositionInc(a,d.endPosition[1],-1)},{default:g(()=>[Vs]),_:2},1032,["onClick"]),b(c,{onClick:k=>r.armEndPositionInc(a,d.endPosition[1],1)},{default:g(()=>[Gs]),_:2},1032,["onClick"]),b(c,{onClick:k=>r.armEndPositionInc(a,d.endPosition[1],10)},{default:g(()=>[Hs]),_:2},1032,["onClick"]),i("h4",zs,w(d.endPositionValue.toFixed(2)),1)],64))),128))]),i("div",Js,[i("div",null,[b(c,{onClick:d=>r.armHome(a)},{default:g(()=>[Us]),_:2},1032,["onClick"])]),i("div",Ws,[b(c,{class:"whitespace-nowrap",onClick:d=>r.armModifyAll(a)},{default:g(()=>[Ys]),_:2},1032,["onClick"])])])])):E("",!0),r.resourceStatusByName(a)?(m(),f("div",Ks,[Xs,i("div",Zs,[(m(!0),f(C,null,P(r.resourceStatusByName(a).joint_pieces,d=>(m(),f(C,{key:d.joint},[i("h4",Qs," Joint "+w(d.joint),1),b(c,{onClick:k=>r.armJointInc(a,d.joint,-10)},{default:g(()=>[$s]),_:2},1032,["onClick"]),b(c,{onClick:k=>r.armJointInc(a,d.joint,-1)},{default:g(()=>[er]),_:2},1032,["onClick"]),b(c,{onClick:k=>r.armJointInc(a,d.joint,1)},{default:g(()=>[tr]),_:2},1032,["onClick"]),b(c,{onClick:k=>r.armJointInc(a,d.joint,10)},{default:g(()=>[nr]),_:2},1032,["onClick"]),i("h4",or,w(d.jointValue.toFixed(2)),1)],64))),128))]),i("div",sr,[i("div",null,[b(c,{onClick:d=>r.armHome(a)},{default:g(()=>[rr]),_:2},1032,["onClick"])]),i("div",ir,[b(c,{class:"whitespace-nowrap",onClick:d=>r.armModifyAll(a)},{default:g(()=>[ar]),_:2},1032,["onClick"])])])])):E("",!0)])])]),default:g(()=>[i("div",ps,[i("h2",gs," Arm "+w(a.name),1)])]),_:2},1024)]))),128)),i("div",cr,[(m(!0),f(C,null,P(r.filterResources("rdk","component","gripper"),a=>(m(),ie(u,{key:a.name},{content:g(()=>[i("div",dr,[b(c,{class:"mr-4",group:"",onClick:d=>r.gripperAction(a.name,"open")},{default:g(()=>[ur]),_:2},1032,["onClick"]),b(c,{group:"",onClick:d=>r.gripperAction(a.name,"grab")},{default:g(()=>[mr]),_:2},1032,["onClick"])])]),default:g(()=>[lr]),_:2},1024))),128))]),r.resourceStatusByName(e.servo)?(m(!0),f(C,{key:1},P(r.filterResources("rdk","component","servo"),a=>(m(),f("div",{key:a.name,class:"pb-8"},[b(u,null,{content:g(()=>[i("div",fr,[i("table",br,[i("tr",null,[hr,i("td",_r,w(r.resourceStatusByName(a).positionDeg),1)]),i("tr",null,[wr,i("td",vr,[b(c,{group:"",onClick:d=>r.servoMove(a,-10)},{default:g(()=>[yr]),_:2},1032,["onClick"]),b(c,{group:"",onClick:d=>r.servoMove(a,-1)},{default:g(()=>[Sr]),_:2},1032,["onClick"]),b(c,{group:"",onClick:d=>r.servoMove(a,1)},{default:g(()=>[kr]),_:2},1032,["onClick"]),b(c,{group:"",onClick:d=>r.servoMove(a,10)},{default:g(()=>[Cr]),_:2},1032,["onClick"])])])])])]),default:g(()=>[i("div",pr,[i("h2",gr," Servo "+w(a.name),1)])]),_:2},1024)]))),128)):E("",!0),r.resourceStatusByName(e.motor)?(m(!0),f(C,{key:2},P(r.filterResources("rdk","component","motor"),a=>(m(),ie(h,{key:"new-"+a.name,class:"pb-8","motor-name":a.name,crumbs:["motor",a.name],"motor-status":r.resourceStatusByName(a),onMotorRun:d=>r.motorCommand(a.name,d),onMotorStop:d=>r.motorStop(a.name)},null,8,["motor-name","crumbs","motor-status","onMotorRun","onMotorStop"]))),128)):E("",!0),r.resourceStatusByName(e.controller)?(m(!0),f(C,{key:3},P(r.filteredInputControllerList(),a=>(m(),ie(S,{key:"new-"+a.name,class:"pb-8","controller-name":a.name,"controller-status":r.resourceStatusByName(a)},null,8,["controller-name","controller-status"]))),128)):E("",!0),r.hasWebGamepad()?(m(),ie(A,{key:4,class:"pb-8",style:{"max-width":"1080px"},onExecute:t[0]||(t[0]=a=>r.inputInject(a))})):E("",!0),r.resourceStatusByName(e.board)?(m(!0),f(C,{key:5},P(r.filterResources("rdk","component","board"),a=>(m(),f("div",{key:a.name,class:"pb-8"},[b(u,null,{content:g(()=>[i("div",Rr,[Nr,i("table",xr,[(m(!0),f(C,null,P(r.resourceStatusByName(a).analogsMap,(d,k)=>(m(),f("tr",{key:k},[i("th",Tr,w(k),1),i("td",qr,w(d.value||0),1)]))),128))]),Dr,i("table",Mr,[(m(!0),f(C,null,P(r.resourceStatusByName(a).digitalInterruptsMap,(d,k)=>(m(),f("tr",{key:k},[i("th",Er,w(k),1),i("td",Br,w(d.value||0),1)]))),128))]),Lr,i("table",Or,[i("tr",null,[Ir,i("td",jr,[i("div",Fr,[Vr,b(R,{modelValue:o.getPin,"onUpdate:modelValue":t[1]||(t[1]=d=>o.getPin=d),class:"mr-2","input-id":"get_pin_"+a.name},null,8,["modelValue","input-id"]),b(c,{class:"mr-2",group:"",onClick:d=>r.getGPIO(a.name)},{default:g(()=>[Gr]),_:2},1032,["onClick"]),i("span",{id:"get_pin_value_"+a.name,class:"py-2"},null,8,Hr)])])]),i("tr",null,[zr,i("td",Jr,[i("div",Ur,[Wr,b(R,{modelValue:o.setPin,"onUpdate:modelValue":t[2]||(t[2]=d=>o.setPin=d),class:"mr-2","input-id":"set_pin_"+a.name},null,8,["modelValue","input-id"]),i("select",{id:"set_pin_v_"+a.name,class:"bg-white border border-black mr-2",style:{height:"38px"}},Zr,8,Yr),b(c,{group:"",onClick:d=>r.setGPIO(a.name)},{default:g(()=>[Qr]),_:2},1032,["onClick"])])])])])])]),default:g(()=>[i("div",Pr,[i("h2",Ar," Board "+w(a.name),1)])]),_:2},1024)]))),128)):E("",!0),r.nonEmpty(o.sensorNames)?(m(),f("div",$r,[b(u,null,{content:g(()=>[i("div",ti,[i("table",ni,[i("tr",null,[oi,si,ri,i("th",ii,[b(c,{group:"",onClick:t[3]||(t[3]=a=>r.getReadings(o.sensorNames))},{default:g(()=>[ai]),_:1})])]),(m(!0),f(C,null,P(o.sensorNames,a=>(m(),f("tr",null,[i("td",ci,w(a.name),1),i("td",li,w(a.subtype),1),i("td",di,w(o.sensorReadings[r.resourceNameToString(a)]),1),i("td",ui,[b(c,{group:"",onClick:d=>r.getReadings([a])},{default:g(()=>[mi]),_:2},1032,["onClick"])])]))),256))])])]),default:g(()=>[ei]),_:1})])):E("",!0),r.filterResources("rdk","service","navigation").length>0?(m(),f("div",pi,[b(u,null,{content:g(()=>[i("div",fi,[i("div",bi,[b(c,{group:"",onClick:t[4]||(t[4]=a=>r.setNavigationMode("manual"))},{default:g(()=>[hi]),_:1}),b(c,{group:"",onClick:t[5]||(t[5]=a=>r.setNavigationMode("waypoint"))},{default:g(()=>[_i]),_:1})]),i("div",wi,[b(c,{group:"",onClick:t[6]||(t[6]=a=>r.setNavigationLocation("nav-set-location"))},{default:g(()=>[vi]),_:1})]),ve(i("div",yi,null,512),[[x]]),b(M,{modelValue:o.locationValue,"onUpdate:modelValue":t[7]||(t[7]=a=>o.locationValue=a),"input-id":"nav-set-location"},null,8,["modelValue"])])]),default:g(()=>[gi]),_:1})])):E("",!0),i("div",Si,[b(u,null,{content:g(()=>[i("div",Ci,[i("table",Pi,[Ai,(m(!0),f(C,null,P(o.currentOps,a=>(m(),f("tr",{key:a.id},[i("td",Ri,w(a.id),1),i("td",Ni,w(a.method),1),i("td",xi,w(new Date().getTime()-a.started.seconds*1e3)+"ms ",1),i("td",Ti,[b(c,{onClick:d=>r.killOp(a.id)},{default:g(()=>[qi]),_:2},1032,["onClick"])])]))),128))])])]),default:g(()=>[ki]),_:1})]),(m(!0),f(C,null,P(o.streamNames,a=>(m(),f("div",{key:a,class:"camera pb-8"},[b(N,{"stream-name":a,crumbs:[a],x:o.pcdClick.x,y:o.pcdClick.y,z:o.pcdClick.z,"pcd-click":o.pcdClick,"segmenter-names":o.segmenterNames,"segmenter-parameters":o.segmenterParameters,"segmenter-parameter-names":o.segmenterParameterNames,"parameter-type":r.parameterType,"segment-algo":o.segmentAlgo,"segment-objects":o.objects,"find-status":o.pcdClick.calculatingSegments,onFullImage:t[8]||(t[8]=d=>r.doPCDLoad(o.fullcloud)),onCenterPcd:t[9]||(t[9]=d=>r.doCenterPCDLoad(o.fullcloud)),onFindSegments:t[10]||(t[10]=d=>r.findSegments(o.segmentAlgo,o.segmenterParameters)),onChangeSegmenter:r.getSegmenterParameters,onToggleCamera:d=>r.viewCamera(a),onRefreshCamera:r.viewCameraFrame,onSelectedCameraView:r.viewCameraFrame,onTogglePcd:d=>{r.renderPCD(a),r.getSegmenterNames()},onPcdClick:r.grabClick,onPcdMove:r.doPCDMove,onPointLoad:r.doPointLoad,onSegmentLoad:r.doSegmentLoad,onBoundingBoxLoad:r.doBoundingBoxLoad,onDownloadScreenshot:d=>r.renderFrame(a),onDownloadRawData:t[11]||(t[11]=d=>r.doPCDDownload(o.fullcloud)),onSelectObject:r.doSelectObject},null,8,["stream-name","crumbs","x","y","z","pcd-click","segmenter-names","segmenter-parameters","segmenter-parameter-names","parameter-type","segment-algo","segment-objects","find-status","onChangeSegmenter","onToggleCamera","onRefreshCamera","onSelectedCameraView","onTogglePcd","onPcdClick","onPcdMove","onPointLoad","onSegmentLoad","onBoundingBoxLoad","onDownloadScreenshot","onSelectObject"])]))),128)),r.filterResources("rdk","service","slam").length>0?(m(),f("div",Di,[b(B,{"image-map":o.imageMapTemp,"pcd-map":o.pcdMapTemp,onRefreshImageMap:r.viewSLAMImageMap,onRefreshPcdMap:r.viewSLAMPCDMap},null,8,["image-map","pcd-map","onRefreshImageMap","onRefreshPcdMap"])])):E("",!0)])])],64)}var Ei=In(Wn,[["render",Mi]]);require("@improbable-eng/grpc-web");window.robotApi=require("./gen/proto/api/robot/v1/robot_pb");const{RobotServiceClient:Bi}=require("./gen/proto/api/robot/v1/robot_pb_service");window.commonApi=require("./gen/proto/api/common/v1/common_pb");window.armApi=require("./gen/proto/api/component/arm/v1/arm_pb");const{ArmServiceClient:Li}=require("./gen/proto/api/component/arm/v1/arm_pb_service");window.baseApi=require("./gen/proto/api/component/base/v1/base_pb");const{BaseServiceClient:Oi}=require("./gen/proto/api/component/base/v1/base_pb_service");window.boardApi=require("./gen/proto/api/component/board/v1/board_pb");const{BoardServiceClient:Ii}=require("./gen/proto/api/component/board/v1/board_pb_service");window.cameraApi=require("./gen/proto/api/component/camera/v1/camera_pb");const{CameraServiceClient:ji}=require("./gen/proto/api/component/camera/v1/camera_pb_service");window.gantryApi=require("./gen/proto/api/component/gantry/v1/gantry_pb");const{GantryServiceClient:Fi}=require("./gen/proto/api/component/gantry/v1/gantry_pb_service");window.gripperApi=require("./gen/proto/api/component/gripper/v1/gripper_pb");const{GripperServiceClient:Vi}=require("./gen/proto/api/component/gripper/v1/gripper_pb_service");window.imuApi=require("./gen/proto/api/component/imu/v1/imu_pb");const{IMUServiceClient:Gi}=require("./gen/proto/api/component/imu/v1/imu_pb_service");window.inputApi=require("./gen/proto/api/component/inputcontroller/v1/input_controller_pb");const{InputControllerServiceClient:Hi}=require("./gen/proto/api/component/inputcontroller/v1/input_controller_pb_service");window.motorApi=require("./gen/proto/api/component/motor/v1/motor_pb");const{MotorServiceClient:zi}=require("./gen/proto/api/component/motor/v1/motor_pb_service");window.navigationApi=require("./gen/proto/api/service/navigation/v1/navigation_pb");const{NavigationServiceClient:Ji}=require("./gen/proto/api/service/navigation/v1/navigation_pb_service");window.motionApi=require("./gen/proto/api/service/motion/v1/motion_pb");const{MotionServiceClient:Ui}=require("./gen/proto/api/service/motion/v1/motion_pb_service");window.visionApi=require("./gen/proto/api/service/vision/v1/vision_pb");const{VisionServiceClient:Wi}=require("./gen/proto/api/service/vision/v1/vision_pb_service");window.sensorsApi=require("./gen/proto/api/service/sensors/v1/sensors_pb");const{SensorsServiceClient:Yi}=require("./gen/proto/api/service/sensors/v1/sensors_pb_service");window.servoApi=require("./gen/proto/api/component/servo/v1/servo_pb");const{ServoServiceClient:Ki}=require("./gen/proto/api/component/servo/v1/servo_pb_service");window.slamApi=require("./gen/proto/api/service/slam/v1/slam_pb");const{SLAMServiceClient:Xi}=require("./gen/proto/api/service/slam/v1/slam_pb_service");window.streamApi=require("./gen/proto/stream/v1/stream_pb");const{StreamServiceClient:Zi}=require("./gen/proto/stream/v1/stream_pb_service"),{dialDirect:Qi,dialWebRTC:$i}=require("@viamrobotics/rpc");window.THREE=require("three");window.pcdLib=require("../node_modules/three/examples/jsm/loaders/PCDLoader");window.orbitLib=require("../node_modules/three/examples/jsm/controls/OrbitControls");window.trackLib=require("../node_modules/three/examples/jsm/controls/TrackballControls");const Ne={iceServers:[{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]};window.webrtcAdditionalICEServers&&(Ne.iceServers=Ne.iceServers.concat(window.webrtcAdditionalICEServers));const Ot=async(e,t)=>{let n;const s={authEntity:e,credentials:t,webrtcOptions:{rtcConfig:Ne}},o=`${location.protocol}//${location.hostname}${location.port?`:${location.port}`:""}`;if(window.webrtcEnabled){window.webrtcSignalingAddress||(window.webrtcSignalingAddress=o),s.webrtcOptions.signalingAuthEntity=s.authEntity,s.webrtcOptions.signalingCredentials=s.credentials;const r=await $i(window.webrtcSignalingAddress,window.webrtcHost,s);n=r.transportFactory,window.streamService=new Zi(window.webrtcHost,{transport:n}),r.peerConnection.ontrack=async l=>{const c=document.createElement("video");c.srcObject=l.streams[0],c.autoplay=!0,c.controls=!1,c.playsInline=!0;const u=l.streams[0].id,h=document.getElementById(`stream-${u}`);h&&h.querySelectorAll("video").length>0&&h.querySelectorAll("video")[0].remove(),h&&h.append(c);const S=document.createElement("video");S.srcObject=l.streams[0],S.autoplay=!0,S.controls=!1,S.playsInline=!0;const A=document.getElementById(`stream-preview-${u}`);A&&A.querySelectorAll("video").length>0&&A.querySelectorAll("video")[0].remove(),A&&A.append(S)}}else n=await Qi(o,s);window.connect=()=>Ot(e,t),window.robotService=new Bi(window.webrtcHost,{transport:n}),window.armService=new Li(window.webrtcHost,{transport:n}),window.baseService=new Oi(window.webrtcHost,{transport:n}),window.boardService=new Ii(window.webrtcHost,{transport:n}),window.cameraService=new ji(window.webrtcHost,{transport:n}),window.gantryService=new Fi(window.webrtcHost,{transport:n}),window.gripperService=new Vi(window.webrtcHost,{transport:n}),window.imuService=new Gi(window.webrtcHost,{transport:n}),window.inputControllerService=new Hi(window.webrtcHost,{transport:n}),window.motorService=new zi(window.webrtcHost,{transport:n}),window.navigationService=new Ji(window.webrtcHost,{transport:n}),window.motionService=new Ui(window.webrtcHost,{transport:n}),window.visionService=new Wi(window.webrtcHost,{transport:n}),window.sensorsService=new Yi(window.webrtcHost,{transport:n}),window.servoService=new Ki(window.webrtcHost,{transport:n}),window.slamService=new Xi(window.webrtcHost,{transport:n})};window.connect=Ot;window.rcDebug=!1;window.rcLogConditionally=function(e){rcDebug&&console.log("gRPC call:",e)};window.BaseControlHelper={moveStraight:function(e,t,n,s){const o=new baseApi.MoveStraightRequest;o.setName(e),o.setMmPerSec(n),o.setDistanceMm(t),rcLogConditionally(o),baseService.moveStraight(o,{},s)},spin:function(e,t,n,s){const o=new baseApi.SpinRequest;o.setName(e),o.setAngleDeg(t),o.setDegsPerSec(n),rcLogConditionally(o),baseService.spin(o,{},s)},setPower:function(e,t,n,s){const o=new baseApi.SetPowerRequest;o.setName(e),o.setLinear(t),o.setAngular(n),rcLogConditionally(o),baseService.setPower(o,{},s)},setVelocity:function(e,t,n,s){const o=new baseApi.SetVelocityRequest;o.setName(e),o.setLinear(t),o.setAngular(n),rcLogConditionally(o),baseService.setVelocity(o,{},s)}};window.computeKeyboardBaseControls=function(e){let t=0,n=0;return e.forward?t=1:e.backward&&(t=-1),e.right?n=-1:e.left&&(n=1),{linear:t,angular:n}};window.MotorControlHelper={setPower:function(e,t,n){const s=new motorApi.SetPowerRequest;s.setName(e),s.setPowerPct(t),rcLogConditionally(s),motorService.setPower(s,{},n)},goFor:function(e,t,n,s){const o=new motorApi.GoForRequest;o.setName(e),o.setRpm(t),o.setRevolutions(n),rcLogConditionally(o),motorService.goFor(o,{},s)},goTo:function(e,t,n,s){const o=new motorApi.GoToRequest;o.setName(e),o.setRpm(t),o.setPositionRevolutions(n),rcLogConditionally(o),motorService.goTo(o,{},s)},stop:function(e,t){const n=new motorApi.StopRequest;n.setName(e),rcLogConditionally(n),motorService.stop(n,{},t)}};window.BoardControlHelper={getGPIO:function(e,t,n){const s=new boardApi.GetGPIORequest;s.setName(e),s.setPin(t),rcLogConditionally(s),boardService.getGPIO(s,{},n)},setGPIO:function(e,t,n,s){const o=new boardApi.SetGPIORequest;o.setName(e),o.setPin(t),o.setHigh(n),rcLogConditionally(o),boardService.setGPIO(o,{},s)}};new Vue(Ei).$mount("app");
